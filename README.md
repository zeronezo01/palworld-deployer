<div align="center">

<h1>幻兽帕鲁快速部署脚本</h1>

简体中文 / [English](./Readme.en.md)

</div>

## 0x00 简介

幻兽帕鲁已经爆火有一段时间了，幻兽帕鲁最重要的一个可玩性也是在于玩家可以快速的通过自行部署自建私服与朋友合作进行游戏游玩，但是google上一搜发现现在幻兽帕鲁的私服部署基本上全都是云厂的运营写的软文，通过手动部署将自家的云产品出租出去，毕竟近两年云厂都不太好过，不得抓住这一波赶紧《上路》。。。

这个项目的目的是让帕鲁星人能快速在任何服务器上进行帕鲁私服的搭建，当然，只针对Linux服务器，不对Windows服务器进一步进行开发，毕竟。。。那是Windows，它就不应该是个服务器。

本项目是利用docker容器的方案进行快速部署，因为发现私服的搭建很符合docker镜像与容器的管理逻辑，脚本的功能会包括创建、更新、销毁等部分。

## 0x01 依赖

首先，你肯定是需要有一台不管是物理还是虚拟化的服务器，当然，也不一定是所谓的服务器，只要是x86的机器就行，普通电脑也是没问题的，一般推荐配置为4核16G，不过内存大小也是根据你的朋友数量决定的，如果朋友数量少，那内存就可以减少，如果朋友真的太多，那就还是自己玩吧，毕竟这私服有点贵。

其次，就是网络了，如果直接能映射整个公网IP是最简单的，直接部署完就可以连上了，但是一般来说公网IP资源比较匮乏，我们都是用端口映射的模式进行搭建，幻兽帕鲁私服的默认服务端口只有一个——8211/udp，所以对外只需要针对udp协议提供一个端口就可以提供完整的私服服务。

再次，在你的服务器上需要安装上Linux服务器操作系统，这个就各取所需了，我一般是使用ubuntu server进行搭建，最好版本是能在20.04或以上，项目针对OS主要是需要两个工具依赖

1. docker：容器应用
2. jq：json脚本进行解析的工具

在ubuntu server下只需以root权限通过一个命令即可完成安装，如下

```shell
apt update && apt install -y docker.io jq
```

## 0x02 使用

### 0x02.0x00 创建

使用本项目脚本进行幻兽帕鲁搭建流程很简单，首先确认公网与本机的端口映射关系。

比如本机的内网IP地址为192.168.1.12，公网的IP为117.12.23.12，公网对外提供私服服务的端口为1223，映射到公网端口1223的本机端口为2323，那么映射关系为

	192.168.1.12:2323 -> 117.12.23.12:1223

通过该项目脚本创建幻兽帕鲁私服的命令为

``` shell
bash deploy.sh create -p 2323
```

这样就可以直接部署完成一个私服镜像，并且跑起私服的容器服务，如果去掉-p 2323选项则直接将幻兽帕鲁的服务直接映射在本机的8211端口。

其中有几个部分简单介绍下：

* /etc/palworld/PalworldSettings.ini：该文件为帕鲁私服的配置文件，修改后重启容器即可生效
* 该容器服务每小时会备份一次配置文件以及存储文件，在本机中可/var/lib/docker目录下可查找到